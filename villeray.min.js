var P=Object.defineProperty,T=Object.defineProperties;var V=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var E=(e,t,r)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u=(e,t)=>{for(var r in t||(t={}))v.call(t,r)&&E(e,r,t[r]);if(C)for(var r of C(t))F.call(t,r)&&E(e,r,t[r]);return e},f=(e,t)=>T(e,V(t));function y(e,t){let r=Object.entries(t).map(B).join("&");return r===""?e:e.endsWith("&")?`${e}${r}`:e.includes("?")?`${e}&${r}`:`${e}?${r}`}function B([e,t]){return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`}var b=[];function N(){return b}function D(e,t){if(typeof document=="undefined"){console.log(new Error("invalid server-side call to 'mount'"));return}b.length===0&&R();let r=document.body.querySelector(e);r===null?console.log(new Error(`no match for '${e}' in document body`)):(b.push({elem:r,app:t}),a())}var x=[];function U(e){var t;((t=e.vnodeAttrs)==null?void 0:t.aftercreate)&&x.push(()=>e.vnodeAttrs.aftercreate(e))}function m(e){var t;((t=e.vnodeAttrs)==null?void 0:t.afterremove)&&x.push(()=>e.vnodeAttrs.afterremove(e))}function O(e){var t;((t=e.vnodeAttrs)==null?void 0:t.afterupdate)&&x.push(()=>e.vnodeAttrs.afterupdate(e))}function d(e){return e.class instanceof Array?f(u({},e),{class:e.class.join(" ")}):(e.class&&(e=f(u({},e),{className:e.class}),delete e.class),e)}var G=/(?<=[a-z])[A-Z]/g;function K(e){return e.replaceAll(G,t=>`-${t}`.toLowerCase())}function M([e,t]){return`${K(e)}: ${t};`}function h(e){if(e.style instanceof Object){let t=Object.entries(e.style).map(M);return f(u({},e),{style:t.join(" ")})}return e}var c=class{constructor(t,r,n){this.tag=t,this.attrs=r,this.children=n}static debug(t){let r;return t instanceof Function?r=k(t):t.toString!==Object.prototype.toString?r=t.toString():r=JSON.stringify(t,J,2),new c("pre",{},r)}};function H(e,t,...r){if(typeof e!="string"){let n="error: 'tag' must be a string";return console.log(new Error(n),e),`(${n})`}if((t==null?void 0:t.constructor)!==Object){let n="error: 'attrs' must be an object";return console.log(new Error(n),e),`(${n})`}return new c(e,t,r)}function J(e,t){return t instanceof Function?k(t):t}function k(e){return`[function ${e.name}]`}function L(e){return[e].flat(1/0).map(X)}function X(e){switch(e==null?void 0:e.constructor){case c:return e;case String:case Number:return e.toString();case Boolean:case void 0:return"";default:return c.debug(e)}}function g(e,t){let r=L(t),n=r.length,i=e.childNodes.length,o=Math.min(n,i);for(let s=0;s<o;s++)q(e.childNodes[s],r[s]);for(let s=o;s<n;s++)e.append(S(r[s]));for(let s=n;s<o;s++)e.removeChild(e.children[o]),m(e)}function q(e,t){if(typeof t=="string"){if(e.nodeType===Node.TEXT_NODE){e.textContent!==t&&(e.textContent=t);return}e.replaceWith(S(t)),m(e);return}if(t.tag==="route"){Z(e,t);return}if(t.tag.toUpperCase()===e.tagName){g(e,t.children),W(e,t.attrs),O(e);return}e.replaceWith(S(t)),m(e)}function Z(e,{attrs:t,children:r}){function n(o){var s,l;o.ctrlKey||o.shiftKey||o.metaKey||(A((s=t.path)!=null?s:"",(l=t.params)!=null?l:{}),o.preventDefault())}let i=f(u({},j(t)),{onclick:n});q(e,{tag:"a",attrs:i,children:r})}function W(e,t){var i;let r=(i=e.vnodeAttrs)!=null?i:{};t=h(t),t=d(t),e.vnodeAttrs=t;let n=Object.entries(t).filter(Q);for(let[o,s]of n)o.startsWith("on")?r[o]!==s&&(e[o]=(...l)=>{s(...l),a()}):e[o]!==s&&(e[o]=s);for(let o of Object.keys(r))t[o]==null&&delete e[o]}function Q(e){switch(e[0]){case"aftercreate":case"afterupdate":case"afterremove":return!1}return!0}var w=!1;function S(e){if(typeof e=="string")return document.createTextNode(e);let{tag:t,attrs:r,children:n}=e,i=w;w||(w=t.toUpperCase()==="SVG");let o=w?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return g(o,n),W(o,r),U(o),w=i,o}function a(){var e,t;for(let r of N()){let n=(t=(e=r.elem.activeElement)==null?void 0:e.id)!=null?t:"";g(r.elem,r.app()),n!==""&&document.getElementById(n).focus()}}function A(e,t,r=!0){if(typeof window=="undefined"){console.log(new Error("invalid server-side call to 'route'"));return}let n=y(e,t),i=new URL(n,window.location.href);window.location.href!==i.href&&(r?window.history.pushState({},"",n):window.history.replaceState({},"",n)),a()}function R(){let e="";function t(){let r=window.location.href;r!==e&&(e=r,a()),requestAnimationFrame(t)}t()}function j(e){var r,n;let t=y((r=e.path)!=null?r:"",(n=e.params)!=null?n:{});return e=f(u({},e),{href:t}),delete e.path,delete e.params,e}function Y(e){return Object.fromEntries(new URL(e).searchParams.entries())}var _=/\?|#/;function z(e){return e=e.split(_)[0],e.split("/").filter(t=>t!=="")}function ee(e,t){let r=z(t),n=z(e);if(r.length>n.length)return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],l=n[o];if(s.startsWith(":"))i[s.slice(1)]=l;else{if(s==="*")continue;if(s!==l)return null}}return i}function $(e){return[e].flat(1/0).map(ne).join("")}function I({tag:e,attrs:t,children:r}){if(e==="route")return re(t,r);t=h(t),t=d(t);let n=p(e).toLowerCase(),i=Object.entries(t).filter(te).map(se).join(""),o=$(r);return oe(n)?`<${n}${i} />`:`<${n}${i}>${o}</${n}>`}function te(e){return!e[0].startsWith("on")}function re(e,t){return I({tag:"a",attrs:j(e),children:t})}function ne(e){switch(e==null?void 0:e.constructor){case c:return I(e);case Number:return e.toString();case String:return p(e);case Boolean:case void 0:return"";default:return $(c.debug(e))}}function p(e){return String(e).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&apos;")}function oe(e){switch(e){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"link":case"meta":case"param":case"source":case"track":case"wbr":return!0;default:return!1}}function se([e,t]){switch(t){case!0:return` ${p(e)}`;case!1:return""}return` ${p(e)}="${p(String(t))}"`}export{Y as getParams,ee as matchPath,D as mount,a as refresh,A as route,$ as serialize,H as v};
