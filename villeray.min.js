var P=Object.defineProperty,T=Object.defineProperties;var V=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var E=(e,t,r)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,c=(e,t)=>{for(var r in t||(t={}))F.call(t,r)&&E(e,r,t[r]);if(C)for(var r of C(t))B.call(t,r)&&E(e,r,t[r]);return e},u=(e,t)=>T(e,V(t));function y(e,t){let r=Object.entries(t).map(D).join("&");return r===""?e:e.endsWith("&")?`${e}${r}`:e.includes("?")?`${e}&${r}`:`${e}?${r}`}function D([e,t]){return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`}var b=[];function N(){return b}function G(e,t){if(typeof document=="undefined"){console.log(new Error("invalid server-side call to 'mount'"));return}b.length===0&&R();let r=document.body.querySelector(e);r===null?console.log(new Error(`no match for '${e}' in document body`)):(b.push({elem:r,app:t}),a())}var x=[];function U(e){var t;((t=e.vnodeAttrs)==null?void 0:t.aftercreate)&&x.push(()=>e.vnodeAttrs.aftercreate(e))}function m(e){var t;((t=e.vnodeAttrs)==null?void 0:t.afterremove)&&x.push(()=>e.vnodeAttrs.afterremove(e))}function O(e){var t;((t=e.vnodeAttrs)==null?void 0:t.afterupdate)&&x.push(()=>e.vnodeAttrs.afterupdate(e))}function d(e){return e.class instanceof Array?u(c({},e),{class:e.class.join(" ")}):(e.class&&(e=u(c({},e),{className:e.class}),delete e.class),e)}var K=/(?<=[a-z])[A-Z]/g;function v(e){return e.replaceAll(K,t=>`-${t}`.toLowerCase())}function M([e,t]){return`${v(e)}: ${t};`}function h(e){if(e.style instanceof Object){let t=Object.entries(e.style).map(M);return u(c({},e),{style:t.join(" ")})}return e}var f=class{constructor(t,r,o){this.tag=t,this.attrs=r,this.children=o}static debug(t){let r;return t instanceof Function?r=k(t):t.toString!==Object.prototype.toString?r=t.toString():r=JSON.stringify(t,H,2),new f("pre",{},r)}};function H(e,t){return t instanceof Function?k(t):t}function k(e){return`[function ${e.name}]`}function L(e){return[e].flat(1/0).map(J)}function J(e){switch(e==null?void 0:e.constructor){case f:return e;case String:case Number:return e.toString();case Boolean:case void 0:return"";default:return f.debug(e)}}function g(e,t){let r=L(t),o=r.length,i=e.childNodes.length,n=Math.min(o,i);for(let s=0;s<n;s++)q(e.childNodes[s],r[s]);for(let s=n;s<o;s++)e.append(S(r[s]));for(let s=o;s<n;s++)e.removeChild(e.children[n]),m(e)}function q(e,t){if(typeof t=="string"){if(e.nodeType===Node.TEXT_NODE){e.textContent!==t&&(e.textContent=t);return}e.replaceWith(S(t)),m(e);return}if(t.tag==="route"){X(e,t);return}if(t.tag.toUpperCase()===e.tagName){g(e,t.children),W(e,t.attrs),O(e);return}e.replaceWith(S(t)),m(e)}function X(e,{attrs:t,children:r}){function o(n){var s,l;n.ctrlKey||n.shiftKey||n.metaKey||(A((s=t.path)!=null?s:"",(l=t.params)!=null?l:{}),n.preventDefault())}let i=u(c({},j(t)),{onclick:o});q(e,{tag:"a",attrs:i,children:r})}function W(e,t){var i;let r=(i=e.vnodeAttrs)!=null?i:{};t=h(t),t=d(t),e.vnodeAttrs=t;let o=Object.entries(t).filter(Z);for(let[n,s]of o)n.startsWith("on")?r[n]!==s&&(e[n]=(...l)=>{s(...l),a()}):e[n]!==s&&(e[n]=s);for(let n of Object.keys(r))t[n]==null&&delete e[n]}function Z(e){switch(e[0]){case"aftercreate":case"afterupdate":case"afterremove":return!1}return!0}var w=!1;function S(e){if(typeof e=="string")return document.createTextNode(e);let{tag:t,attrs:r,children:o}=e,i=w;w||(w=t.toUpperCase()==="SVG");let n=w?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return g(n,o),W(n,r),U(n),w=i,n}function a(){var e,t;for(let r of N()){let o=(t=(e=r.elem.activeElement)==null?void 0:e.id)!=null?t:"";g(r.elem,r.app()),o!==""&&document.getElementById(o).focus()}}function A(e,t,r=!0){if(typeof window=="undefined"){console.log(new Error("invalid server-side call to 'route'"));return}let o=y(e,t),i=new URL(o,window.location.href);window.location.href!==i.href&&(r?window.history.pushState({},"",o):window.history.replaceState({},"",o)),a()}function R(){let e="";function t(){let r=window.location.href;r!==e&&(e=r,a()),requestAnimationFrame(t)}t()}function j(e){var r,o;let t=y((r=e.path)!=null?r:"",(o=e.params)!=null?o:{});return e=u(c({},e),{href:t}),delete e.path,delete e.params,e}function Q(e){return Object.fromEntries(new URL(e).searchParams.entries())}var Y=/\?|#/;function z(e){return e=e.split(Y)[0],e.split("/").filter(t=>t!=="")}function _(e,t){let r=z(t),o=z(e);if(r.length>o.length)return null;let i={};for(let n=0;n<r.length;n++){let s=r[n],l=o[n];if(s.startsWith(":"))i[s.slice(1)]=l;else{if(s==="*")continue;if(s!==l)return null}}return i}function $(e){return[e].flat(1/0).map(re).join("")}function I({tag:e,attrs:t,children:r}){if(e==="route")return te(t,r);t=h(t),t=d(t);let o=p(e).toLowerCase(),i=Object.entries(t).filter(ee).map(oe).join(""),n=$(r);return ne(o)?`<${o}${i} />`:`<${o}${i}>${n}</${o}>`}function ee(e){return!e[0].startsWith("on")}function te(e,t){return I({tag:"a",attrs:j(e),children:t})}function re(e){switch(e==null?void 0:e.constructor){case f:return I(e);case Number:return e.toString();case String:return p(e);case Boolean:case void 0:return"";default:return $(f.debug(e))}}function p(e){return String(e).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&apos;")}function ne(e){switch(e){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"link":case"meta":case"param":case"source":case"track":case"wbr":return!0;default:return!1}}function oe([e,t]){switch(t){case!0:return` ${p(e)}`;case!1:return""}return` ${p(e)}="${p(String(t))}"`}export{Q as getParams,_ as matchPath,G as mount,a as refresh,A as route,$ as serialize};
